(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],u=0,p=[];u<i.length;u++)r=i[u],o[r]&&p.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,r=1;r<a.length;r++){var i=a[r];0!==o[i]&&(n=!1)}n&&(s.splice(e--,1),t=l(l.s=a[0]))}return t}var n={},r={app:0},o={app:0},s=[];function i(t){return l.p+"js/"+({"group-settings":"group-settings","group-store":"group-store"}[t]||t)+"."+{"chunk-2d230c8f":"83a9c33a","chunk-500556c0":"15673e78","group-settings":"bbc1b14a","group-store":"41ab4321"}[t]+".js"}function l(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(t){var e=[],a={"chunk-500556c0":1,"group-settings":1,"group-store":1};r[t]?e.push(r[t]):0!==r[t]&&a[t]&&e.push(r[t]=new Promise(function(e,a){for(var n="css/"+({"group-settings":"group-settings","group-store":"group-store"}[t]||t)+"."+{"chunk-2d230c8f":"31d6cfe0","chunk-500556c0":"8715a96e","group-settings":"0d033446","group-store":"cfda4ecf"}[t]+".css",o=l.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var c=s[i],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===n||u===o))return e()}var p=document.getElementsByTagName("style");for(i=0;i<p.length;i++){c=p[i],u=c.getAttribute("data-href");if(u===n||u===o)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var n=e&&e.target&&e.target.src||o,s=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");s.request=n,delete r[t],d.parentNode.removeChild(d),a(s)},d.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(d)}).then(function(){r[t]=0}));var n=o[t];if(0!==n)if(n)e.push(n[2]);else{var s=new Promise(function(e,a){n=o[t]=[e,a]});e.push(n[2]=s);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=i(t),c=function(e){u.onerror=u.onload=null,clearTimeout(p);var a=o[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+n+": "+r+")");s.type=n,s.request=r,a[1](s)}o[t]=void 0}};var p=setTimeout(function(){c({type:"timeout",target:u})},12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(e)},l.m=t,l.c=n,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(a,n,function(e){return t[e]}.bind(null,n));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var p=0;p<c.length;p++)e(c[p]);var d=u;s.push(["1112","chunk-vendors"]),a()})({"0368":function(t,e,a){"use strict";var n=a("59bc"),r=a.n(n);r.a},"0837":function(t){t.exports=[{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox container manager data API"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox"},{rel:"urn:X-databox:rels:hasType",val:"databox:container-manager:data"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"data"},{rel:"urn:X-databox:rels:hasStoreType",val:"kv"},{rel:"urn:X-databox:rels:isActuator",val:!0}],href:"tcp://container-manager-core-store:5555/kv/data"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox container manager API"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox"},{rel:"urn:X-databox:rels:hasType",val:"databox:container-manager:api"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"api"},{rel:"urn:X-databox:rels:hasStoreType",val:"kv"},{rel:"urn:X-databox:rels:isActuator",val:!0}],href:"tcp://container-manager-core-store:5555/kv/api"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Persistant SLA storage"},{rel:"urn:X-hypercat:rels:isContentType",val:"json"},{rel:"urn:X-databox:rels:hasVendor",val:"databox"},{rel:"urn:X-databox:rels:hasType",val:"databox:container-manager:SLA"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"slaStore"},{rel:"urn:X-databox:rels:hasStoreType",val:"kv"}],href:"tcp://container-manager-core-store:5555/kv/slaStore"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"container manager logs"},{rel:"urn:X-hypercat:rels:isContentType",val:"aplication/json"},{rel:"urn:X-databox:rels:hasVendor",val:"databox"},{rel:"urn:X-databox:rels:hasType",val:"databox-logs"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"cmlogs"},{rel:"urn:X-databox:rels:hasStoreType",val:"tsblob"}],href:"tcp://container-manager-core-store:5555/tsblob/cmlogs"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox manifests"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox"},{rel:"urn:X-databox:rels:hasType",val:"databox:manifests:all"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"all"},{rel:"urn:X-databox:rels:hasStoreType",val:"kv"}],href:"tcp://core-app-store-core-store:5555/kv/all"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox driver manifests"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox"},{rel:"urn:X-databox:rels:hasType",val:"databox:manifests:driver"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"drivers"},{rel:"urn:X-databox:rels:hasStoreType",val:"kv"}],href:"tcp://core-app-store-core-store:5555/kv/drivers"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox app manifests"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox"},{rel:"urn:X-databox:rels:hasType",val:"databox:manifests:app"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"apps"},{rel:"urn:X-databox:rels:hasStoreType",val:"kv"}],href:"tcp://core-app-store-core-store:5555/kv/apps"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox free memory in bytes structured"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox Inc."},{rel:"urn:X-databox:rels:hasType",val:"freememStructured"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"freememStructured"},{rel:"urn:X-databox:rels:hasStoreType",val:"ts"},{rel:"urn:X-databox:rels:hasUnit",val:"bytes"}],href:"tcp://driver-os-monitor-core-store:5555/ts/freememStructured"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox load average 1 minute structured"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox Inc."},{rel:"urn:X-databox:rels:hasType",val:"loadavg1Structured"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"loadavg1Structured"},{rel:"urn:X-databox:rels:hasStoreType",val:"ts"},{rel:"urn:X-databox:rels:hasUnit",val:"%"}],href:"tcp://driver-os-monitor-core-store:5555/ts/loadavg1Structured"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox free memory in bytes"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox Inc."},{rel:"urn:X-databox:rels:hasType",val:"freemem"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"freemem"},{rel:"urn:X-databox:rels:hasStoreType",val:"ts"},{rel:"urn:X-databox:rels:hasUnit",val:"bytes"}],href:"tcp://driver-os-monitor-core-store:5555/ts/blob/freemem"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox load average over 15 minutes"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox Inc."},{rel:"urn:X-databox:rels:hasType",val:"loadavg15"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"loadavg15"},{rel:"urn:X-databox:rels:hasStoreType",val:"ts"},{rel:"urn:X-databox:rels:hasUnit",val:"%"}],href:"tcp://driver-os-monitor-core-store:5555/ts/blob/loadavg15"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox load average over 5 minutes"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox Inc."},{rel:"urn:X-databox:rels:hasType",val:"loadavg5"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"loadavg5"},{rel:"urn:X-databox:rels:hasStoreType",val:"ts"},{rel:"urn:X-databox:rels:hasUnit",val:"%"}],href:"tcp://driver-os-monitor-core-store:5555/ts/blob/loadavg5"},{"item-metadata":[{rel:"urn:X-hypercat:rels:hasDescription:en",val:"Databox load average 1 minute"},{rel:"urn:X-hypercat:rels:isContentType",val:"application/json"},{rel:"urn:X-databox:rels:hasVendor",val:"Databox Inc."},{rel:"urn:X-databox:rels:hasType",val:"loadavg1"},{rel:"urn:X-databox:rels:hasDatasourceid",val:"loadavg1"},{rel:"urn:X-databox:rels:hasStoreType",val:"ts"},{rel:"urn:X-databox:rels:hasUnit",val:"%"}],href:"tcp://driver-os-monitor-core-store:5555/ts/blob/loadavg1"}]},1112:function(t,e,a){"use strict";a.r(e);a("28a5"),a("f559"),a("cadf"),a("551c"),a("097d");var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[null!==t.title?a("header",{staticClass:"mdc-top-app-bar"},[a("div",{staticClass:"mdc-top-app-bar__row"},[a("section",{staticClass:"mdc-top-app-bar__section mdc-top-app-bar__section--align-start"},[t.backRoute?a("a",{staticClass:"material-icons mdc-top-app-bar__navigation-icon",on:{click:t.back}},[t._v("\n\t\t\t\t\tarrow_back\n\t\t\t\t")]):t._e(),a("span",{staticClass:"mdc-top-app-bar__title"},[t._v(t._s(t.title))])]),t.authenticated?a("section",{staticClass:"mdc-top-app-bar__section mdc-top-app-bar__section--align-end"},[a("router-view",{staticStyle:{display:"flex"},attrs:{name:"toolbar"}}),a("div",{staticClass:"mdc-menu-surface--anchor"},[a("div",{staticClass:"material-icons mdc-top-app-bar__action-item",on:{click:t.openNotifications}},[t._v("\n\t\t\t\t\t\t"+t._s(this.notifications.length>0?"notifications":"notifications_none")+"\n\t\t\t\t\t")]),a("div",{staticClass:"mdc-menu-surface mdc-list mdc-list--two-line",attrs:{id:"notification-menu"}},t._l(t.notifications,function(e){return a("div",{key:e,staticClass:"mdc-list-item"},[a("div",{staticClass:"mdc-list-item__text"},[a("div",{staticClass:"mdc-list-item__primary-text"},[t._v(t._s(e))]),a("div",{staticClass:"mdc-list-item__secondary-text"},[t._v("Yesterday, 1:30pm")])])])}),0)])],1):t._e()])]):t._e(),a("div",{staticClass:"mdc-top-app-bar--fixed-adjust"},[t.connecting?a("div",{attrs:{id:"content"}},[a("Spinner")],1):a("div",{attrs:{id:"content"}},[a("router-view")],1)])])},r=[],o=a("5d73"),s=a.n(o),i=a("795b"),l=a.n(i),c=(a("7f7f"),a("f499")),u=a.n(c),p=(a("96cf"),a("3b8d")),d=(a("a481"),a("92a6")),h=a("2375"),v=a("a6e6"),f="databoxURL",m={name:"app",components:{Spinner:h["a"]},data:function(){return{title:"Databox Dashboard",backRoute:null,databoxUrl:"",connecting:!0,authenticated:!1,notifications:[],notificationMenu:null}},created:function(){var t=this,e=localStorage.getItem(f);null!==e?this.databoxUrl=e:this.isMobile||(this.databoxUrl=window.location.hostname),this.apiRequest("/core-ui/ui/api/containerStatus",{}).then(function(){t.connecting=!1,t.authenticated=!0}).catch(function(e){console.log("Connect Failed"),console.log(e),t.connecting=!1,t.authenticated=!1,t.$router.replace("/login")})},updated:function(){this.authenticated&&null==this.notificationMenu?this.notificationMenu=new d["MDCMenuSurface"](document.getElementById("notification-menu")):this.notificationMenu=null},watch:{title:function(t){document.title=t||"Databox Dashboard"}},methods:{request:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.credentials="include",a.mode="cors",fetch("https://"+this.databoxUrl+t,a).then(function(t){if(t.ok)return t;throw{message:t.statusText,status:t.status}}).catch(function(t){throw e.connecting=!1,401===t.status?(e.authenticated=!1,e.$router.replace("/login"),t):t})},apiRequest:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.credentials="include",n.mode="cors",this.request(t,n).then(function(t){return t.json()}).catch(function(t){if(a.isDev)return e;throw t})},installAndWait:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.apiRequest("/core-ui/ui/api/install",{},{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:u()({manifest:e})});case 2:return t.next=4,this.waitForInstall(e.name);case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),waitForInstall:function(){var t=Object(p["a"])(regeneratorRuntime.mark(function t(e){var a,n,r,o,i,c,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,this.apiRequest("/core-ui/ui/api/containerStatus",v);case 3:a=t.sent,n=!0,r=!1,o=void 0,t.prev=7,i=s()(a);case 9:if(n=(c=i.next()).done){t.next=16;break}if(u=c.value,u.name!==e){t.next=13;break}return t.abrupt("return");case 13:n=!0,t.next=9;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](7),r=!0,o=t.t0;case 22:t.prev=22,t.prev=23,n||null==i.return||i.return();case 25:if(t.prev=25,!r){t.next=28;break}throw o;case 28:return t.finish(25);case 29:return t.finish(22);case 30:return t.next=32,new l.a(function(t){setTimeout(function(){return t()},2e3)});case 32:t.next=0;break;case 34:case"end":return t.stop()}},t,this,[[7,18,22,30],[23,,25,29]])}));function e(e){return t.apply(this,arguments)}return e}(),logout:function(){this.authenticated=!1,this.$router.replace("/login")},login:function(t,e){var a=this;return this.databoxUrl=t,localStorage.setItem(f,t),this.request("/core-ui/ui/api/connect",{method:"GET",credentials:"include",mode:"cors",headers:{Authorization:"Token "+e}}).then(function(){a.authenticated=!0,a.$router.replace("/")}).catch(function(t){if(!a.isDev)throw console.log(t),a.authenticated=!1,t;a.authenticated=!0,a.$router.replace("/")})},back:function(){this.$router.push(this.backRoute)},openNotifications:function(){null!=this.notificationMenu&&this.notifications.length>0&&(this.notificationMenu.open=!0)}}},b=m,g=(a("5c0b"),a("2877")),y=Object(g["a"])(b,n,r,!1,null,null,null);y.options.__file="App.vue";var x=y.exports,_=a("2b0e"),S=a("8c4f"),k=a("3003");_["a"].config.productionTip=!1,_["a"].use(S["a"]),_["a"].use(k["a"]);var w=_["a"],X=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},C=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"Error"},[a("h1",[t._v("404: Page Not Found")])])}],D={name:"404",props:{},mounted:function(){this.$parent.title="Databox Dashboard",this.$parent.backRoute="/"}},T=D,$=Object(g["a"])(T,X,C,!1,null,"d78e69c8",null);$.options.__file="404.vue";var j=$.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.apps?a("div",{attrs:{id:"appList"}},t._l(t.apps,function(e){return"app"!==e.type&&"driver"!==e.type||t.exclusions.includes(e.name)?t._e():a("icon",{key:e.name,staticStyle:{margin:"8px"},attrs:{name:e.name,displayName:!0,updating:"running"!==e.state,route:e.route,icon:e.icon}})}),1):t._e()])},I=[],O=(a("55dd"),a("60a6")),E={name:"Home",props:{},components:{Icon:O["a"]},data:function(){return{apps:[],timerID:0,exclusions:["core-ui","app-store","driver-sensingkit"]}},mounted:function(){var t=this;this.$parent.title="Databox Dashboard",this.$parent.backRoute=null,this.loadData(),this.timerID=setInterval(function(){t.loadData()},2e3)},destroyed:function(){clearInterval(this.timerID)},methods:{loadData:function(){var t=this;this.$parent.apiRequest("/core-ui/ui/api/containerStatus",v).then(function(e){var a=!1;if(e.push({name:"Settings",type:"app",state:"running",icon:"settings",route:"/settings"}),e.push({name:"App Store",type:"app",state:"running",icon:"apps",route:"/store"}),t.isMobile&&e.push({name:"Sensing Kit",type:"app",state:"running",icon:"phonelink_ring",route:"/sensing"}),e.sort(function(t,e){return t.name.toLowerCase().localeCompare(e.name.toLowerCase())}),t.apps.length===e.length)for(var n=0;n<t.apps.length;n++){var r=t.apps[n],o=e[n];if(r.name!==o.name||r.status!==o.status){a=!0;break}}else a=!0;if(a){var i=!0,l=!1,c=void 0;try{for(var u,p=s()(e);!(i=(u=p.next()).done);i=!0){var d=u.value;null==d.route&&(d.route="/view/"+d.name)}}catch(h){l=!0,c=h}finally{try{i||null==p.return||p.return()}finally{if(l)throw c}}t.apps=e}})},GoToUI:function(t){this.$router.push("view?ui="+t)},Restart:function(t){alert("Install "+t)},Uninstall:function(t){alert("Uninstall"+t)}}},M=E,P=(a("b1ee"),Object(g["a"])(M,R,I,!1,null,"24ea582e",null));P.options.__file="Home.vue";var U=P.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("iframe",{attrs:{src:t.url}})},L=[],N=(a("386d"),{name:"appUI",props:["app","path"],computed:{url:function(){var t="https://"+this.$parent.databoxUrl+"/"+this.app+"/ui";this.path&&(t=t+"/"+this.path);var e=window.location.search;return""!==e&&(t+=e),t}},mounted:function(){this.$parent.title=this.app,this.$parent.backRoute="/"}}),q=N,V=(a("e00f"),Object(g["a"])(q,A,L,!1,null,"3d8cfbc6",null));V.options.__file="AppUI.vue";var K=V.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"mdc-menu-surface--anchor"},[a("div",{staticClass:"material-icons mdc-top-app-bar__action-item",on:{click:t.openMenu}},[t._v("more_vert")]),a("div",{staticClass:"mdc-menu-surface mdc-list",attrs:{id:"app-menu"}},[a("div",{staticClass:"mdc-list-item",on:{click:t.restart}},[a("span",{staticClass:"mdc-list-item__graphic material-icons",attrs:{"aria-hidden":"true"}},[t._v("refresh")]),t._v("\n\t\t\t\tRestart\n\t\t\t")]),a("div",{staticClass:"mdc-list-item",on:{click:t.remove}},[a("span",{staticClass:"mdc-list-item__graphic material-icons",attrs:{"aria-hidden":"true"}},[t._v("delete")]),t._v("\n\t\t\t\tUninstall\n\t\t\t")])])])])},Q=[],z={name:"appUI",props:["app"],data:function(){return{appMenu:null}},mounted:function(){this.appMenu=new d["MDCMenuSurface"](document.querySelector("#app-menu"))},methods:{openMenu:function(){this.appMenu.open=!0},viewLogs:function(){alert("Comming soon!!")},restart:function(){var t=this;this.$parent.apiRequest("/core-ui/ui/api/restart",{},{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:u()({name:this.app})}).then(function(){t.$router.push("/")})},remove:function(){var t=this;this.$parent.apiRequest("/core-ui/ui/api/uninstall",{},{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:u()({name:this.app})}).then(function(){t.$router.push("/")})}}},J=z,F=Object(g["a"])(J,B,Q,!1,null,null,null);F.options.__file="AppUIToolbar.vue";var W=F.exports,G=function(){return Promise.all([a.e("chunk-2d230c8f"),a.e("chunk-500556c0")]).then(a.bind(null,"013f"))},H=function(){return a.e("group-store").then(a.bind(null,"c587"))},Y=function(){return a.e("group-store").then(a.bind(null,"ef16"))},Z=function(){return a.e("group-store").then(a.bind(null,"8642"))},tt=function(){return Promise.all([a.e("chunk-2d230c8f"),a.e("group-settings")]).then(a.bind(null,"b41f"))},et=function(){return Promise.all([a.e("chunk-2d230c8f"),a.e("group-settings")]).then(a.bind(null,"948b"))},at=function(){return Promise.all([a.e("chunk-2d230c8f"),a.e("group-settings")]).then(a.bind(null,"93ab"))},nt=function(){return Promise.all([a.e("chunk-2d230c8f"),a.e("group-settings")]).then(a.bind(null,"9cde"))},rt=function(){return Promise.all([a.e("chunk-2d230c8f"),a.e("group-settings")]).then(a.bind(null,"69cd"))},ot=[{path:"/",component:U},{path:"/404",component:j},{path:"/data",component:nt},{path:"/data/:app",component:rt,props:!0},{path:"/data/:app/:datasource",component:at,props:!0},{path:"/login",name:"login",component:G,props:!0},{path:"/store",components:{default:H,toolbar:Y},props:{default:!0,toolbar:!1}},{path:"/settings",component:tt},{path:"/settings/system",component:et},{path:"/install/:app",component:Z,props:!0},{path:"/view/:app",components:{default:K,toolbar:W},props:{default:!0,toolbar:!0}},{path:"/view/:app/:path",components:{default:K,toolbar:W},props:{default:!0,toolbar:!0}},{path:"*",component:j}],st=ot,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div")},lt=[],ct={name:"scanQR",mounted:function(){var t=this;this.$parent.title="Scan QR Code",this.$parent.backRoute="/login",QRScanner.prepare(function(e,a){var n=document.getElementsByTagName("body")[0];e&&(console.error(e),n.style.backgroundColor="",QRScanner.destroy(),t.$router.push("/scan")),a.authorized&&(QRScanner.scan(function(e,a){if(e)console.error(u()(e));else{n.style.backgroundColor="",QRScanner.destroy();var r=JSON.parse(a),o=[r.ipExternal],i=!0,l=!1,c=void 0;try{for(var p,d=s()(r.ips);!(i=(p=d.next()).done);i=!0){var h=p.value;"127.0.0.1"===h||h.startsWith("169.254.")||o.push(h)}}catch(e){l=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(l)throw c}}var v=r.token.trim().replace(/^(Token=)/,"");t.$router.replace({name:"login",params:{ipList:o,password:v,autoLogin:!0}})}}),QRScanner.show(function(){n.style.backgroundColor="transparent"}))})},beforeDestroy:function(){var t=document.getElementsByTagName("body")[0];t.style.backgroundColor="",QRScanner.destroy()}},ut=ct,pt=Object(g["a"])(ut,it,lt,!1,null,"16fe1697",null);pt.options.__file="Scan.vue";var dt=pt.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"sensorKit"}},[null==t.installed||t.loading?[a("Spinner")]:!1===t.installed?[a("div",{staticClass:"material-icons mdc-theme--primary",staticStyle:{"font-size":"64px","align-self":"center"}},[t._v("phonelink_ring")]),a("div",{staticStyle:{width:"200px",margin:"16px","align-self":"center"}},[t._v("The Sensor Kit allows you to capture data from your mobile and send it securely to your Databox")]),a("button",{staticClass:"mdc-button mdc-button--unelevated",staticStyle:{"align-self":"center"},on:{click:t.installSensingKit}},[t._v("Install")])]:a("div",{staticClass:"mdc-list mdc-list--avatar-list"},[a("div",{staticStyle:{padding:"0 16px 16px 16px"}},[t._v("The Sensor Kit allows you to capture data from your mobile and send it securely to your Databox")]),t._l(t.sensors,function(e){return a("label",{key:e,staticClass:"mdc-list-item",attrs:{for:t.sensorId(e),role:"checkbox","aria-checked":t.isEnabled(e)}},[t._v("\n\t\t\t"+t._s(e)+"\n\t\t\t"),a("div",{staticClass:"mdc-checkbox mdc-list-item__meta"},[a("input",{staticClass:"mdc-checkbox__native-control",attrs:{id:t.sensorId(e),type:"checkbox",name:e},domProps:{checked:t.isEnabled(e)},on:{change:function(e){t.checkboxChange(e)}}}),a("div",{staticClass:"mdc-checkbox__background"},[a("svg",{staticClass:"mdc-checkbox__checkmark",attrs:{viewBox:"0 0 24 24"}},[a("path",{staticClass:"mdc-checkbox__checkmark-path",attrs:{fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}})]),a("div",{staticClass:"mdc-checkbox__mixedmark"})])])])})],2)],2)},vt=[],ft=a("0837"),mt=a("0441"),bt={name:"install",components:{Spinner:h["a"]},data:function(){return{loading:!1}},asyncComputed:{installed:{lazy:!0,get:function(){return this.$parent.apiRequest("/core-ui/ui/api/containerStatus",ft).then(function(t){var e=!0,a=!1,n=void 0;try{for(var r,o=s()(t);!(e=(r=o.next()).done);e=!0){var i=r.value;if("driver-sensingkit"===i.name)return!0}}catch(l){a=!0,n=l}finally{try{e||null==o.return||o.return()}finally{if(a)throw n}}return!1})},default:null},sensors:{lazy:!0,get:function(){return this.installed?new l.a(function(t){window.SensingKit.listSensors(function(e){e.sort(),t(e)})}):l.a.resolve([])},default:[]}},computed:{enabledSensors:function(){var t=localStorage.getItem("sensors");return t?JSON.parse(t):[]}},mounted:function(){this.$parent.title="Sensing Kit",this.$parent.backRoute="/"},updated:function(){var t=document.getElementsByClassName("mdc-checkbox"),e=!0,a=!1,n=void 0;try{for(var r,o=s()(t);!(e=(r=o.next()).done);e=!0){var i=r.value;new mt["MDCCheckbox"](i)}}catch(l){a=!0,n=l}finally{try{e||null==o.return||o.return()}finally{if(a)throw n}}},methods:{isEnabled:function(t){return-1!==this.enabledSensors.indexOf(t)},sensorId:function(t){return"sensor_"+t.toLowerCase().replace(/ /g,"_")},checkboxChange:function(t){var e=t.target.name;if(t.target.checked)-1===this.enabledSensors.indexOf(e)&&this.enabledSensors.push(e);else for(var a=0;a<this.enabledSensors.length;a++)this.enabledSensors[a]===e&&this.enabledSensors.splice(a,1);var n="https://"+this.$parent.databoxUrl+"/driver-sensingkit";console.log(this.enabledSensors),window.SensingKit.startSensors(this.enabledSensors,n,function(){})},installSensingKit:function(){var t=this;this.loading=!0,this.$parent.apiRequest("/core-ui/ui/api/manifest/driver-sensingkit").then(function(e){t.$parent.installAndWait(e).then(function(){t.loading=!1,t.installed=!0})})}}},gt=bt,yt=(a("0368"),Object(g["a"])(gt,ht,vt,!1,null,null,null));yt.options.__file="SensingKit.vue";var xt=yt.exports;w.mixin({data:function(){return{isMobile:!0,isDev:!1}}}),st.push({path:"/scan",component:dt}),st.push({path:"/sensing",component:xt});var _t=new S["a"]({routes:st});new w({router:_t,render:function(t){return t(x)},mounted:function(){var t=this;document.addEventListener("pause",this.onPause,!1),document.addEventListener("resume",this.onResume,!1),this.$children[0].$watch("authenticated",function(){t.onResume()})},methods:{onPause:function(){window.SensingKit.stop()},onResume:function(){var t=this.$children[0];t.authenticated&&t.request("/driver-sensingkit/ui").then(function(){var e=localStorage.getItem("sensors"),a="https://"+t.databoxUrl+"/driver-sensingkit";e&&window.SensingKit.startSensors(JSON.parse(e),a,function(){})})}}}).$mount("#app"),window.getOauthCallbackURL=function(){if(window.location.pathname.startsWith("/core-ui/ui/view/")){var t=window.location.pathname.split("/")[4];return"databox://"+t+"/oauth"}return"databox://oauth"},window.startOauth=function(t){toolbar.showSpinner(),SafariViewController.isAvailable(function(e){e?SafariViewController.show({url:t,hidden:!1,animated:!1,enterReaderModeIfAvailable:!1,tintColor:"#3f51b5"},function(t){"opened"===t.event||"loaded"===t.event||t.event},function(t){console.log("KO: "+t)}):window.open(t,"_blank","location=yes")})}},2375:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{staticClass:"spinner",attrs:{viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"}},[a("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"6","stroke-linecap":"round",cx:"33",cy:"33",r:"30"}})])},r=[],o={name:"spinner"},s=o,i=(a("e6a9"),a("2877")),l=Object(i["a"])(s,n,r,!1,null,"4288a2d6",null);l.options.__file="Spinner.vue";e["a"]=l.exports},"59bc":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5e27":function(t,e,a){},6089:function(t,e,a){"use strict";var n=a("c36b"),r=a.n(n);r.a},"60a6":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-icon",class:{hover:t.route&&!t.updating},on:{click:function(e){t.goto()}}},[a("div",{staticClass:"app-icon-letter",class:{"material-icons":t.icon}},[t.updating?a("svg",{staticClass:"spinner",attrs:{viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"}},[a("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"6","stroke-linecap":"round",cx:"33",cy:"33",r:"30"}})]):t.icon?[t._v(t._s(t.icon))]:[t._v(t._s(t.displayLetter))],t.banner?a("div",{staticClass:"banner"},[t._v(t._s(t.banner))]):t._e()],2),t.display?a("div",{staticClass:"text"},[t._v(t._s(t.name))]):t._e()])},r=[],o=(a("7f7f"),a("a481"),{name:"icon",props:{name:String,displayName:Boolean,updating:Boolean,icon:String,route:String,letter:String,banner:String},computed:{displayLetter:function(){return this.letter||this.name.replace("-","").replace("_","").replace("app","").replace("driver","").replace("core","")[0].toUpperCase()},display:function(){return"undefined"===typeof this.displayName||this.displayName}},methods:{goto:function(){this.route&&!this.updating&&this.$router.push(this.route)}}}),s=o,i=(a("6089"),a("2877")),l=Object(i["a"])(s,n,r,!1,null,"1f27dbaa",null);l.options.__file="AppIcon.vue";e["a"]=l.exports},a6e6:function(t){t.exports=[{name:"arbiter",type:"system",desiredState:"running",state:"running",status:"running"},{name:"app-data-tracker",type:"app",desiredState:"running",state:"running",status:"running"},{name:"core-app-store-core-store",type:"store",desiredState:"running",state:"running",status:"running"},{name:"core-ui",type:"app",desiredState:"running",state:"running",status:"running"},{name:"core-app-store",type:"driver",desiredState:"running",state:"running",status:"running"},{name:"export-service",type:"system",desiredState:"running",state:"running",status:"running"},{name:"container-manager-core-store",type:"store",desiredState:"running",state:"running",status:"running"}]},b1ee:function(t,e,a){"use strict";var n=a("e5cd"),r=a.n(n);r.a},b882:function(t,e,a){},bcc8:function(t,e,a){},c36b:function(t,e,a){},e00f:function(t,e,a){"use strict";var n=a("b882"),r=a.n(n);r.a},e5cd:function(t,e,a){},e6a9:function(t,e,a){"use strict";var n=a("bcc8"),r=a.n(n);r.a}});
//# sourceMappingURL=app.4aa4f103.js.map